
var http = require('http');

module.exports = {
  getBalance: function(address, fn) {
    var options = {
      hostname: 'dogechain.info',
      port: 80,
      path: '/chain/Dogecoin/q/addressbalance/' + address,
      method: 'GET'
    };

    var req = http.request(options, function(res) {
      res.on('data', function(result) {
        result = result.toString();

        if(result.indexOf('ERROR') == -1) {
          fn(result);
        }
        else {
          fn(false);
        }
      });
    });

    req.on('error', function(e) {
      console.log(e);
      fn(false);
    });
    
    req.end();
  },
  validDogeAddress: function(addr) {
    return /^D[a-zA-Z0-9]{33}$/.test(addr);
  }
};
